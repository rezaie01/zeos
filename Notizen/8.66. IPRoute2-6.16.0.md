#iproute2 #netzwerk

# IPRoute2-6.16.0

- Paket für grundlegende und erweiterte IPv4-Netzwerkverwaltung
- Werkzeuge für Routing, Interfaces, Bridges, Traffic Control, Monitoring

---

## Kompilierungsprozess

- Entfernen von `arpd` (abhängig von Berkeley DB, nicht in LFS):
    
    ```bash
    sed -i /ARPD/d Makefile
    rm -fv man/man8/arpd.8
    ```
    
- Kompilieren:
    
    ```bash
    make NETNS_RUN_DIR=/run/netns
    ```
    
- Installation:
    
    ```bash
    make SBINDIR=/usr/sbin install
    ```
    
- Optional: Dokumentation installieren
    
    ```bash
    install -vDm644 COPYING README* -t /usr/share/doc/iproute2-6.16.0
    ```
    

---

## Nach-der-Installation

- Verzeichnisse: `/etc/iproute2`, `/usr/lib/tc`, `/usr/share/doc/iproute2-6.16.0`
- Keine zusätzliche Konfiguration notwendig, Programme direkt nutzbar

---

## Essenzielle Programme und Nutzung

### #ip

- Hauptwerkzeug für Netzwerkverwaltung
- Wichtige Unterbefehle:
    - `ip link show` → Status von Interfaces
    - `ip link set dev eth0 up` → Interface aktivieren
    - `ip addr show` → IP-Adressen anzeigen
    - `ip addr add 192.168.1.10/24 dev eth0` → IP-Adresse hinzufügen
    - `ip route show` → Routing-Tabelle anzeigen
    - `ip route add default via 192.168.1.1` → Standardroute setzen
    - `ip neighbor show` → ARP/Nachbar-Einträge anzeigen
    - `ip tunnel add ...` → Tunnel konfigurieren
    - `ip monitor` → Echtzeitüberwachung von Interfaces, Adressen, Routen

### #ss

- Socket-Statistiken, Ersatz für `netstat`
- Typische Nutzung:
    - `ss -tuln` → offene TCP/UDP Ports
    - `ss -s` → Zusammenfassung aller Sockets
    - `ss -p` → Prozesse mit offenen Verbindungen

### #bridge

- Verwaltung von Netzwerk-Bridges
- Typische Nutzung:
    - `bridge link` → Interfaces in Bridge anzeigen
    - `bridge fdb show` → Forwarding-Datenbank anzeigen
    - `bridge add dev eth0` → Interface zur Bridge hinzufügen

### #tc

- Traffic Control (QoS, CoS)
- Typische Nutzung:
    - `tc qdisc show` → Queueing-Disziplin anzeigen
    - `tc qdisc add dev eth0 root handle 1: htb` → Hierarchische Token Bucket konfigurieren
    - `tc class add dev eth0 parent 1: classid 1:1 htb rate 1mbit` → Klasse definieren
    - `tc filter add dev eth0 parent 1: protocol ip prio 1 u32 match ip dst 192.168.1.100 flowid 1:1` → Filterregel setzen
    - `tc monitor` → Änderungen in Echtzeit überwachen

### #ifstat

- Interface-Statistiken (Pakete gesendet/empfangen)
- Typische Nutzung:
    
    ```bash
    ifstat
    ```
    

### #nstat

- Netzwerkstatistiken aus `/proc/net/netstat`
- Typische Nutzung:
    
    ```bash
    nstat
    ```
    

### #lnstat

- Erweiterte Netzwerkstatistiken, Ersatz für `rtstat`
- Typische Nutzung:
    
    ```bash
    lnstat
    ```
    

### #routel

- Routingtabellen in lesbarer Form
- Typische Nutzung:
    
    ```bash
    routel
    ```
    

### #rtmon

- Überwachung von Routing-Änderungen
- Typische Nutzung:
    
    ```bash
    rtmon
    ```
    

### #rtacct

- Anzeige von `/proc/net/rt_acct` (Routing Accounting)
- Typische Nutzung:
    
    ```bash
    rtacct
    ```
    

### #genl

- Verwaltung von Generic Netlink-Sockets
- Typische Nutzung:
    
    ```bash
    genl list
    ```
    

### #rtpr

- Ausgabe von `ip -o` in lesbarer Form konvertieren

---

## Fokus für Systemintegration

- #ip → zentrale Steuerung von Interfaces, IP-Adressen, Routing, Monitoring
- #ss → Analyse von Netzwerkverbindungen, Troubleshooting von Ports und Prozessen
- #bridge → Verwaltung von Layer-2-Netzwerken, Virtualisierung, Container-Netzwerke
- #tc → Bandbreitenkontrolle, QoS, Netzwerk-Tuning
- #ifstat / #nstat / #lnstat → Monitoring und Performance-Analyse
- #rtmon → Echtzeitüberwachung von Routingänderungen
- #routel → schnelle Übersicht über Routingtabellen
