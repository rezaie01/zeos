#Findutils #find #locate #updatedb #xargs

## üõ†Ô∏è Findutils-4.10.0: Lernnotizen f√ºr LFS

### 1. Paketfunktion

- Das Findutils-Paket enth√§lt Programme zum **Finden von Dateien**.
    
- Es stellt `find` (rekursive Suche im Verzeichnisbaum) und `locate` (Suche in einer Datenbank) bereit.
    
- Enth√§lt auch `xargs`, um Befehle auf eine Liste von gefundenen Dateien anzuwenden.
    

---

### 2. Kompilierungsprozess

#### **Vorbereitung**

- Konfiguration des Pakets:
    ```
    ./configure --prefix=/usr --localstatedir=/var/lib/locate
    ```
    
- **Wichtige Option:**
    
    - `--localstatedir=/var/lib/locate`: Verschiebt die `locate`-Datenbank an den **FHS-konformen** Speicherort `/var/lib/locate`.
        

#### **Kompilierung und Test**

- Kompilierung:
    ```
    make
    ```
    
- Testdurchf√ºhrung (als Nicht-Root-Benutzer `tester`):
    ```
    chown -R tester .
    su tester -c "PATH=$PATH make check"
    ```
    

#### **Installation**

- Installation des Pakets:
    ```
    make install
    ```
    

---

### 3. Nach-der-Installation-Konfigurationen

- Das Verzeichnis `/var/lib/locate` wird erstellt.
    
- Die `locate`-Datenbank ist initial leer und muss durch `updatedb` gef√ºllt werden.
    

---

### 4. Essenzielle Programme und ihre Nutzung

|Programm|Beschreibung|Nutzung (Fokus: Systemintegration)|
|---|---|---|
|#find|**Durchsucht Verzeichnisb√§ume** rekursiv nach Dateien, die Kriterien erf√ºllen.|**Das m√§chtigste Werkzeug zur Dateisuche in Echtzeit.**<br><br>  <br>  <br><br>**1. Nach Name/Typ suchen:**<br><br>  <br><br>* `find /pfad -name "dateiname"` (Gro√ü-/Kleinschreibung beachten, Wildcards `*` nutzen).<br><br>  <br><br>* `find /pfad -iname "dateiname"` (Gro√ü-/Kleinschreibung ignorieren).<br><br>  <br><br>* `find /pfad -type f` (Nur Dateien).<br><br>  <br><br>* `find /pfad -type d` (Nur Verzeichnisse).<br><br>  <br>  <br><br>**2. Nach Berechtigungen suchen:**<br><br>  <br><br>* `find /pfad -perm 644` (Exakte Berechtigung).<br><br>  <br><br>* `find /pfad -perm /u=s` (Sucht nach SUID-Bits).<br><br>  <br><br>* `find /pfad -perm /4000` (Sucht nach SUID-Bits, oktal).<br><br>  <br>  <br><br>**3. Nach Zeitstempel suchen (Wichtig f√ºr Logs/Sicherheit):**<br><br>  <br><br>* `find /pfad -mtime -1` (Modified Time: j√ºnger als 1 Tag).<br><br>  <br><br>* `find /pfad -mmin -60` (Modified Time: j√ºnger als 60 Minuten).<br><br>  <br><br>* `find /pfad -atime +7` (Access Time: √§lter als 7 Tage).<br><br>  <br>  <br><br>**4. Aktionen ausf√ºhren (-exec):**<br><br>  <br><br>* `find /pfad -name "*.tmp" -exec rm {} \;` (F√ºhrt `rm` f√ºr jede gefundene Datei einzeln aus).<br><br>  <br><br>* `find /pfad -name "*.conf" -exec chmod 640 {} \;` (√Ñndert Berechtigungen).|
|#xargs|Liest eine Liste von Elementen (z.B. Dateipfade von `find`) von STDIN und **wendet einen Befehl darauf an**.|**Effizienz-Werkzeug zur Stapelverarbeitung.** `xargs` ist effizienter als `find -exec ... \;`, da es mehrere Argumente auf einmal an den Befehl √ºbergibt.<br><br>  <br>  <br><br>**1. Kombination mit `find` (Standard):**<br><br>  <br><br>* `find /pfad -name "*.log" \| xargs grep "ERROR"` (Durchsucht alle `.log`-Dateien nach "ERROR").<br><br>  <br>  <br><br>**2. Problembehandlung (Null-Terminierung):**<br><br>  <br><br>Dateinamen mit Leerzeichen brechen `xargs`. Die **sichere Methode** ist:<br><br>  <br><br>* `find /pfad -print0 \| xargs -0 <befehl>`<br><br>  <br><br>* `find ... -print0`: Sendet Pfade getrennt durch `\0` (Null-Byte).<br><br>  <br><br>* `xargs -0`: Liest Eingabe, die durch `\0` getrennt ist.<br><br>  <br><br>* **Beispiel:** `find /tmp -name "*.tmp" -print0 \| xargs -0 rm` (Sicheres L√∂schen von Temps).<br><br>  <br>  <br><br>**3. Interaktive Nutzung:**<br><br>  <br><br>* `xargs -p` (Promptet den Benutzer vor jeder Ausf√ºhrung).|
|#locate|Durchsucht eine **vorgefertigte Datenbank** mit Dateinamen.|**Extrem schnelle Suche**, aber **unzuverl√§ssig**, wenn die Datenbank veraltet ist.<br><br>  <br>  <br><br>**Nutzung:** `locate <suchbegriff>` (z.B. `locate libssl.so`).|
|#updatedb|**Aktualisiert die `locate`-Datenbank**.|Scannt das gesamte Dateisystem (respektiert Mount-Grenzen, wenn konfiguriert) und schreibt die Dateinamen in die Datenbank.<br><br>  <br>  <br><br>**Nutzung:** `updatedb` (Muss als `root` ausgef√ºhrt werden, oft als t√§glicher Cronjob).|
