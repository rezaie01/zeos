#Meson #meson #meson-setup #ninja-build #pip3

## üõ†Ô∏è Meson-1.4.0: Lernnotizen f√ºr LFS

### 1. Paketfunktion

- Meson ist ein **Open-Source-Build-System**.
    
- Konzentriert sich auf **Geschwindigkeit** und **Benutzerfreundlichkeit**.
    
- Generiert standardm√§√üig **Ninja-Build-Dateien** zur tats√§chlichen Kompilierung.
    
- Dient als leistungsf√§higer Ersatz f√ºr traditionelle `configure`/`make`-Systeme.
    

---

### 2. Kompilierungsprozess

#### **Vorbereitung (Meson ist ein Python-Modul)**

- Meson ist in Python implementiert und wird wie andere Python-Pakete gebaut und installiert.
    

#### **Build (Wheel-Erstellung)**

- Kompilierung durch Erstellung eines **Wheel-Archivs** (`.whl`):
    ```
    pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD
    ```
    
    - `pip3 wheel`: F√ºhrt den Bau des `.whl`-Archivs durch.
        
    - **Wichtiger Punkt:** Die Optionen `--no-build-isolation`, `--no-deps` und `--no-cache-dir` sind **obligatorisch** in LFS, um Isolation zu gew√§hrleisten und Online-Downloads zu verhindern.
        

#### **Installation**

- Installation des lokal erstellten Wheels:
    ```
    pip3 install --no-index --find-links dist meson
    ```
    
    - `--no-index`: **Ignoriert** das Online-Paket-Repository (PyPI).
        
    - `--find-links dist`: **Installiert** das Paket aus dem lokalen `dist`-Verzeichnis.
        
- Installation der Shell-Vervollst√§ndigungsskripte (Systemintegration):
    ```
    install -vDm644 data/shell-completions/bash/meson /usr/share/bash-completion/completions/meson
    install -vDm644 data/shell-completions/zsh/_meson /usr/share/zsh/site-functions/_meson
    ```
    

---

### 3. Nach-der-Installation-Konfigurationen

- Keine spezifischen Konfigurationsschritte erforderlich.
    
- Installiertes Verzeichnis: `/usr/lib/python3.13/site-packages/mesonbuild` und zugeh√∂rige `dist-info`-Dateien.
    
- **Hinweis:** Meson wird oft f√ºr Pakete ben√∂tigt, die im nachfolgenden BLFS (Beyond Linux From Scratch) Buch vorkommen.
    

---

### 4. Essenzielle Programme und ihre Nutzung

|Programm / Kommando|Beschreibung|Nutzung (Fokus: Build-System-Pipeline)|
|---|---|---|
|#meson|Der Meson-Build-System-Front-End-Befehl.|**1. Konfiguration:** `meson setup <Quelldir> <Builddir>`.<br><br>  <br><br>Wird verwendet, um das Build-System eines Projekts zu **konfigurieren**. Liest die `meson.build`-Dateien und generiert die **Ninja-Build-Dateien** im `<Builddir>` (z.B. `build`).<br><br>  <br>  <br><br>**2. Konfigurationspr√ºfung/-√§nderung:** `meson configure <Builddir>`.<br><br>  <br><br>Zeigt die Build-Optionen an oder √§ndert diese (z.B. `meson configure -Dprefix=/tmp build`).|
|#meson-setup|Meson-Subkommando zur Generierung.|`meson setup build` (wird oft aus dem Quellverzeichnis ausgef√ºhrt).<br><br>  <br><br>Der Befehl **trennt das Quellverzeichnis vom Build-Verzeichnis** (`<Builddir>`) strikt, was der **sauberen Kompilierung** dient und die **Deinstallation** erleichtert (man l√∂scht einfach das `<Builddir>`).|
|#ninja-build|Das eigentliche Kompilierungswerkzeug.|Wird nach `meson setup` verwendet.<br><br>  <br><br>**Nutzung:** `cd <Builddir>` gefolgt von `ninja`.<br><br>  <br><br>F√ºhrt die Kompilierung, das Linken und die Installation durch, basierend auf den von Meson generierten Dateien.|
|#ninja-test|Testkommando.|`cd <Builddir>` gefolgt von `ninja test`.<br><br>  <br><br>Startet die im Meson-Projekt definierten Unit-Tests.|
|#ninja-install|Installationskommando.|`cd <Builddir>` gefolgt von `ninja install`.<br><br>  <br><br>Installiert die gebauten Programme und Bibliotheken ins Zielsystem (`/usr`).|