#grub #bootloader

# GRUB-2.12

- Bootloader für Linux-Systeme
- Lädt Kernel und initiales Dateisystem beim Systemstart
- Unterstützt BIOS und UEFI (UEFI über BLFS)

---

## Kompilierungsprozess

- Vorbereitungen:
    
    - Umgebungsvariablen löschen:
        
        ```bash
        unset {C,CPP,CXX,LD}FLAGS
        ```
        
    - Datei ergänzen:
        
        ```bash
        echo depends bli part_gpt > grub-core/extra_deps.lst
        ```
        
- Konfiguration:
    
    ```bash
    ./configure --prefix=/usr \
                --sysconfdir=/etc \
                --disable-efiemu \
                --disable-werror
    ```
    
- Kompilieren:
    
    ```bash
    make
    ```
    
- Installation:
    
    ```bash
    make install
    mv -v /etc/bash_completion.d/grub /usr/share/bash-completion/completions
    ```
    
- Tests: `make check` möglich, aber nicht empfohlen
    

---

## Nach-der-Installation

- Bootprozess-Konfiguration erfolgt später (Kapitel 10.4)
- Bash-Completion-Datei verschoben nach `/usr/share/bash-completion/completions`
- GRUB wird mit `grub-install` auf Laufwerk installiert
- Verzeichnisse: `/usr/lib/grub`, `/etc/grub.d`, `/usr/share/grub`, `/boot/grub`

---

## Essenzielle Programme und Nutzung

### #grub-install

- Installiert GRUB auf Laufwerk
- Typische Nutzung:
    
    ```bash
    grub-install /dev/sda
    ```
    
- Wichtig für BIOS/UEFI Bootfähigkeit

### #grub-mkconfig

- Generiert `grub.cfg` automatisch
- Typische Nutzung:
    
    ```bash
    grub-mkconfig -o /boot/grub/grub.cfg
    ```
    
- Liest Skripte aus `/etc/grub.d` und Kernel-Infos

### #grub-probe

- Ermittelt Geräteinformationen für Pfad oder Device
- Typische Nutzung:
    
    ```bash
    grub-probe /boot
    ```
    
- Prüft Dateisystem und Partitionstyp

### #grub-editenv

- Bearbeitet GRUB-Umgebungsblock
- Typische Nutzung:
    
    ```bash
    grub-editenv list
    grub-editenv create /boot/grub/grubenv
    ```
    
- Verwaltung von Boot-Parametern

### #grub-set-default

- Setzt Standard-Boot-Eintrag dauerhaft
- Typische Nutzung:
    
    ```bash
    grub-set-default 2
    ```
    
- Boot-Eintrag wird bei jedem Start gewählt

### #grub-reboot

- Setzt Boot-Eintrag nur für nächsten Neustart
- Typische Nutzung:
    
    ```bash
    grub-reboot 1
    ```
    

### #grub-mkrescue

- Erstellt bootfähiges Rettungsmedium (ISO, USB)
- Typische Nutzung:
    
    ```bash
    grub-mkrescue -o grub-rescue.iso
    ```
    

### #grub-mkpasswd-pbkdf2

- Generiert verschlüsseltes Passwort für GRUB-Menü
- Typische Nutzung:
    
    ```bash
    grub-mkpasswd-pbkdf2
    ```
    
- Ausgabe in `grub.cfg` für geschützte Boot-Einträge

---

## Weitere Programme (Kurzüberblick)

- #grub-file → Dateityp prüfen
- #grub-fstest → Dateisystemtreiber debuggen
- #grub-script-check → Syntaxprüfung von GRUB-Skripten
- #grub-mkimage → Bootbares GRUB-Image erzeugen
- #grub-mkstandalone → Standalone-Image generieren
- #grub-menulst2cfg → Konvertiert GRUB Legacy Menü zu `grub.cfg`
- #grub-syslinux2cfg → Konvertiert Syslinux-Konfiguration zu GRUB

---

## Fokus für Systemintegration

- `grub-install` → zentrale Installation
- `grub-mkconfig` → automatische Konfiguration
- `grub-probe` → Troubleshooting bei Bootproblemen
- `grub-set-default` / `grub-reboot` → Boot-Management
- `grub-mkrescue` → Notfall- und Recovery-Medien
- `grub-mkpasswd-pbkdf2` → Sicherheit im Bootmenü
