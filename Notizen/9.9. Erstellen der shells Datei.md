#LFS #etcinputrc #Readline #etcshells #validity

---

## 9.9. Erstellen der `/etc/shells` Datei

Die Datei `/etc/shells` ist wichtig, weil sie eine Liste aller gültigen Login-Shells auf dem System enthält. Anwendungen benötigen diese Liste, um festzustellen, ob eine Shell überhaupt gültig ist.

Zum Beispiel nutzt das Programm `chsh` (Change Shell) diese Datei, um zu prüfen, ob ein Benutzer ohne spezielle Berechtigungen die Login-Shell für sein eigenes Konto ändern darf. Wenn der Name der Shell nicht in dieser Datei steht, wird dem Benutzer die Änderung verweigert.

Außerdem verlangen auch andere Anwendungen wie GDM (ein Display Manager) die Existenz dieser Datei. FTP-Daemons (Server) verbieten traditionell den Zugriff für Benutzer, deren Shells nicht in dieser Datei aufgeführt sind.

Jede gültige Shell muss in einer einzelnen Zeile mit ihrem Pfad, relativ zum Wurzelverzeichnis (`/`), eingetragen werden.

### Erklärung des Codeblocks 2 (`/etc/shells`):

Dieser Block erstellt die `/etc/shells`-Datei und trägt die beiden gängigen Shell-Pfade ein, um sie als gültige Login-Shells auf dem System zu definieren.

```
CODEBLOCK 2:
cat > /etc/shells << "EOF" # Begin /etc/shells
/bin/sh /bin/bash
# End /etc/shells EOF
```

Die Shells `/bin/sh` und `/bin/bash` sind nun als gültige Anmelde-Shells für das System eingetragen.

---

## Glossar

|Begriff|Erklärung (LFS-Kontext)|
|:--|:--|
|**`chsh`**|Befehl zur Änderung der Login-Shell eines Benutzers. Er konsultiert `/etc/shells`, um die Gültigkeit der neuen Shell zu prüfen.|
|**GDM**|GNOME Display Manager, ein Programm, das die `/etc/shells` benötigt, um ordnungsgemäß zu funktionieren.|
|**FTP Daemon**|Ein Server-Programm, das FTP-Verbindungen verwaltet. Es verweigert traditionell den Zugriff für Benutzer, deren Shell nicht in `/etc/shells` gelistet ist.|
|**Escape Sequence**|Eine Folge von Zeichen, die mit einem Escape-Zeichen (`\e`) beginnt und zur Steuerung von Terminalfunktionen verwendet wird. Im `inputrc` werden sie auf `readline`-Funktionen abgebildet.|
|**Meta Flag / Input Meta**|Einstellungen in `inputrc`, die festlegen, wie 8-Bit-Eingaben behandelt werden.|
|**`horizontal-scroll-mode Off`**|Eine `readline`-Einstellung, die bewirkt, dass die Eingabeaufforderung umbricht, anstatt seitlich zu scrollen.|
