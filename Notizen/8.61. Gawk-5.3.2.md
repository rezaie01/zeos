#Gawk #awk #gawk #TextProcessing

## üõ†Ô∏è Gawk-5.3.2: Lernnotizen f√ºr LFS

### 1. Paketfunktion

- Das Gawk-Paket enth√§lt Programme zur **Manipulation von Textdateien**.
    
- Es handelt sich um die GNU-Implementierung der Programmiersprache `awk`.
    

---

### 2. Kompilierungsprozess

#### **Vorbereitung**

- Entfernen von Verweisen auf unn√∂tige Extras aus dem `Makefile`:
    ```
    sed -i 's/extras//' Makefile.in
    ```
    
- Konfiguration des Pakets:
    ```
    ./configure --prefix=/usr
    ```
    

#### **Kompilierung und Test**

- Kompilierung:
    ```
    make
    ```
    
- Testdurchf√ºhrung (als Nicht-Root-Benutzer `tester`):
    ```
    chown -R tester .
    su tester -c "PATH=$PATH make check"
    ```
    

#### **Installation**

- **Wichtiger Punkt:** Der Hardlink, der in Kapitel 6 (Cross-Kompilierung) erstellt wurde, muss manuell entfernt werden, damit das Build-System ihn korrekt neu erstellen kann.
    ```
    rm -f /usr/bin/gawk-5.3.2
    make install
    ```
    

---

### 3. Nach-der-Installation-Konfigurationen

- **Symlink f√ºr Manpage:** Erstellt den `awk.1` Manpage-Symlink, der auf `gawk.1` zeigt, um Konsistenz mit dem `awk`-Programmlink zu gew√§hrleisten.
    ```
    ln -sv gawk.1 /usr/share/man/man1/awk.1
    ```
    
- **Optionale Dokumentation:**
    ```
    install -vDm644 doc/{awkforai.txt,*.eps,pdf,jpg} -t /usr/share/doc/gawk-5.3.2
    ```
    

---

### 4. Essenzielle Programme und ihre Nutzung

|Programm|Beschreibung|Nutzung (Fokus: Systemintegration & Bash-Skripting)|
|---|---|---|
|#gawk|Die GNU-Implementierung von `awk`, einem **musterbasierten Textverarbeitungsprogramm**.|`awk` ist ein **zentrales Werkzeug** f√ºr die Systemadministration zur **Datenextraktion, Filterung und Formatierung** (insb. Logs und CSV-√§hnliche Daten).<br><br>  <br>  <br><br>**Grundstruktur:** `awk 'PATTERN { ACTION }' [Datei]`<br><br>  <br>  <br><br>**1. Feldverarbeitung (Spalten):**<br><br>  <br><br>`awk` teilt Zeilen automatisch in Felder (`$1`, `$2`, ...).<br><br>  <br><br>* `$0`: Gesamte Zeile.<br><br>  <br><br>* `$1`: Erstes Feld.<br><br>  <br><br>* `NF`: Anzahl der Felder (Number of Fields) in der aktuellen Zeile.<br><br>  <br><br>* `$NF`: Das letzte Feld.<br><br>  <br>  <br><br>**2. Feldtrennzeichen (Field Separator):**<br><br>  <br><br>* `-F<Trennzeichen>`: Definiert das Trennzeichen.<br><br>  <br><br>* **Nutzung (Passwd-Datei):** `awk -F':' '{ print $1, $7 }' /etc/passwd` (Druckt Benutzername und Shell).<br><br>  <br>  <br><br>**3. Muster (PATTERN):**<br><br>  <br><br>* `BEGIN { ... }`: Aktion wird _vor_ der ersten Zeile ausgef√ºhrt (z.B. Header drucken).<br><br>  <br><br>* `END { ... }`: Aktion wird _nach_ der letzten Zeile ausgef√ºhrt (z.B. Summen ausgeben).<br><br>  <br><br>* `/regexp/`: F√ºhrt Aktion aus, wenn die Zeile auf einen regul√§ren Ausdruck passt (z.B. `/error/ { print $0 }`).<br><br>  <br><br>* **Bedingung:** `awk '$3 > 1000' datei.txt` (Druckt Zeilen, bei denen Feld 3 numerisch gr√∂√üer als 1000 ist).<br><br>  <br>  <br><br>**4. Aktionen (ACTION):**<br><br>  <br><br>* `print`: Gibt Daten aus (Standardaktion, wenn keine Aktion definiert ist).<br><br>  <br><br>* `printf`: Formatierte Ausgabe (wie in C/Bash).<br><br>  <br><br>* **Arithmetik:** `awk '{ sum += $1 } END { print sum }' datei.txt` (Addiert alle Werte im ersten Feld).<br><br>  <br>  <br><br>**5. Piping (Systemintegration):**<br><br>  <br><br>`df -h \| awk '$5 ~ /[89][0-9]%\|100%/'` (Zeigt Dateisysteme, die zu 80-100% voll sind).|
|#awk|Ein symbolischer Link auf `gawk`.|Dient der POSIX-Kompatibilit√§t. Skripte verwenden oft `awk` statt `gawk`.|